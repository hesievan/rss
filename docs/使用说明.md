# RSS 日报系统使用说明

## 1. 系统简介

RSS 日报系统是一个智能的新闻聚合和推送工具，能够：

- 🔄 **自动获取**：定时从多个 RSS 源获取最新新闻
- 🎯 **智能筛选**：根据关键词自动筛选重要内容
- 📰 **格式生成**：生成美观的日报格式
- 📱 **即时推送**：通过飞书机器人推送到指定群组

## 2. 快速开始

### 2.1 系统要求

- GitHub 账户
- 飞书账户（用于创建机器人）
- 基本的 Git 操作知识

### 2.2 部署步骤

1. **Fork 项目**
   ```bash
   # 访问项目页面，点击 Fork 按钮
   ```

2. **配置飞书机器人**
   - 登录 [飞书开放平台](https://open.feishu.cn/)
   - 创建机器人应用
   - 获取 Webhook URL

3. **设置 GitHub Secrets**
   - 进入仓库 Settings → Secrets
   - 添加 `FEISHU_WEBHOOK_URL`

4. **配置 RSS 源**
   - 编辑 `config/rss_sources.json`
   - 添加你需要的 RSS 源

5. **启用定时任务**
   - 进入 Actions 页面
   - 启用 "RSS 日报推送" 工作流

## 3. 配置详解

### 3.1 RSS 源配置

在 `config/rss_sources.json` 中配置 RSS 源：

```json
{
  "sources": [
    {
      "name": "36氪",
      "url": "https://www.36kr.com/feed",
      "keywords": ["AI", "人工智能", "机器学习"],
      "exclude_keywords": ["广告", "推广"],
      "max_items": 20
    }
  ]
}
```

**配置参数说明：**

| 参数 | 类型 | 说明 | 示例 |
|------|------|------|------|
| name | string | 源名称，用于标识 | "36氪" |
| url | string | RSS 源地址 | "https://example.com/feed" |
| keywords | array | 包含关键词，支持中文 | ["AI", "人工智能"] |
| exclude_keywords | array | 排除关键词 | ["广告", "推广"] |
| max_items | number | 最大获取文章数 | 20 |

### 3.2 关键词配置技巧

**包含关键词：**
- 使用具体的技术名词：`["ChatGPT", "大模型", "AI"]`
- 使用行业术语：`["融资", "IPO", "收购"]`
- 使用公司名称：`["OpenAI", "特斯拉", "苹果"]`

**排除关键词：**
- 广告相关：`["广告", "推广", "软文"]`
- 无关内容：`["娱乐", "八卦", "体育"]`

### 3.3 全局设置

```json
{
  "global_settings": {
    "max_daily_items": 50,
    "timezone": "Asia/Shanghai",
    "language": "zh-CN"
  }
}
```

## 4. 使用场景

### 4.1 科技资讯监控

**适用人群：** 技术从业者、产品经理、投资人

**推荐配置：**
```json
{
  "sources": [
    {
      "name": "36氪",
      "url": "https://www.36kr.com/feed",
      "keywords": ["AI", "人工智能", "ChatGPT", "大模型", "科技", "创新"],
      "exclude_keywords": ["广告", "推广"],
      "max_items": 20
    },
    {
      "name": "虎嗅网",
      "url": "https://www.huxiu.com/rss/0.xml",
      "keywords": ["科技", "商业", "创新", "创业"],
      "exclude_keywords": ["广告"],
      "max_items": 15
    }
  ]
}
```

### 4.2 行业动态跟踪

**适用人群：** 行业分析师、市场研究人员

**推荐配置：**
```json
{
  "sources": [
    {
      "name": "爱范儿",
      "url": "https://www.ifanr.com/feed",
      "keywords": ["数码", "手机", "智能硬件"],
      "exclude_keywords": ["广告"],
      "max_items": 15
    }
  ]
}
```

### 4.3 投资信息监控

**适用人群：** 投资人、分析师

**推荐配置：**
```json
{
  "sources": [
    {
      "name": "投资界",
      "url": "https://www.pedaily.cn/rss",
      "keywords": ["融资", "IPO", "收购", "投资", "估值"],
      "exclude_keywords": ["广告"],
      "max_items": 20
    }
  ]
}
```

## 5. 高级功能

### 5.1 自定义筛选规则

如果需要更复杂的筛选逻辑，可以修改 `src/content_filter.py`：

```python
def _should_include_article(self, article: Dict[str, Any], config: Dict[str, Any]) -> bool:
    # 自定义筛选逻辑
    title = article.get('title', '').lower()
    
    # 示例：只包含特定时间段发布的文章
    published_time = article.get('published')
    if published_time and published_time.hour < 6:
        return False
    
    # 示例：排除特定来源
    if article.get('source') == '某广告源':
        return False
    
    return super()._should_include_article(article, config)
```

### 5.2 自定义消息格式

可以修改 `src/feishu_sender.py` 来自定义消息格式：

```python
def _build_interactive_card(self, report: Dict[str, Any]) -> Dict[str, Any]:
    # 自定义卡片样式
    card = {
        "config": {"wide_screen_mode": True},
        "header": {
            "title": {"tag": "plain_text", "content": "📰 自定义日报"},
            "template": "red"  # 使用红色主题
        },
        "elements": []
    }
    
    # 添加自定义内容
    return card
```

### 5.3 多平台推送

系统支持扩展到其他平台，可以添加企业微信、钉钉等：

```python
def send_to_wechat(self, content: str) -> bool:
    """发送到企业微信"""
    # 实现企业微信推送逻辑
    pass

def send_to_dingtalk(self, content: str) -> bool:
    """发送到钉钉"""
    # 实现钉钉推送逻辑
    pass
```

## 6. 监控和管理

### 6.1 查看执行状态

1. **GitHub Actions 页面**
   - 进入仓库 Actions 页面
   - 查看 "RSS 日报推送" 工作流执行状态
   - 点击具体执行记录查看详细日志

2. **日志文件**
   - 在 Actions 的 Artifacts 中下载日志文件
   - 查看 `logs/rss_daily.log` 了解执行详情

### 6.2 手动触发

如果需要立即执行一次：

1. 进入 Actions 页面
2. 选择 "RSS 日报推送" 工作流
3. 点击 "Run workflow" 按钮
4. 选择分支并执行

### 6.3 测试连接

可以使用命令行测试飞书连接：

```bash
cd src
python main.py test
```

## 7. 常见问题

### 7.1 未收到飞书消息

**可能原因：**
- Webhook URL 配置错误
- 机器人权限不足
- 网络连接问题

**解决方案：**
1. 检查 `FEISHU_WEBHOOK_URL` 配置
2. 确认机器人已添加到群组
3. 检查机器人权限设置

### 7.2 筛选结果为空

**可能原因：**
- 关键词配置不当
- RSS 源无更新
- 时间筛选过严

**解决方案：**
1. 放宽关键词条件
2. 检查 RSS 源是否正常
3. 调整时间筛选范围

### 7.3 执行失败

**可能原因：**
- 依赖包版本冲突
- 网络超时
- 配置错误

**解决方案：**
1. 查看 Actions 执行日志
2. 更新依赖包版本
3. 检查配置文件格式

## 8. 最佳实践

### 8.1 关键词配置建议

1. **使用具体词汇**：避免过于宽泛的关键词
2. **定期更新**：根据行业变化调整关键词
3. **测试验证**：新配置后先手动测试

### 8.2 性能优化

1. **控制源数量**：建议不超过 10 个 RSS 源
2. **合理设置 max_items**：避免获取过多文章
3. **定期清理**：删除无效的 RSS 源

### 8.3 内容质量

1. **精选源**：选择质量高的 RSS 源
2. **关键词优化**：定期优化关键词配置
3. **反馈调整**：根据用户反馈调整筛选规则

## 9. 技术支持

### 9.1 获取帮助

- 查看 [部署指南](./部署指南.md)
- 提交 GitHub Issue
- 查看项目 Wiki

### 9.2 贡献代码

欢迎提交 Pull Request 来改进系统：

1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 创建 Pull Request

### 9.3 联系方式

- GitHub Issues：提交问题和建议
- 邮箱：联系项目维护者
- 微信群：加入用户交流群 